var __defProp=Object.defineProperty,__defNormalProp=(t,e,n)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__publicField=(t,e,n)=>(__defNormalProp(t,"symbol"!=typeof e?e+"":e,n),n);!function(){"use strict";let t;const e=new Uint8Array(16);function n(){if(!t&&(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}const i=[];for(let Rn=0;Rn<256;++Rn)i.push((Rn+256).toString(16).slice(1));const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function o(t,e,o){if(r.randomUUID&&!e&&!t)return r.randomUUID();const s=(t=t||{}).random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){o=o||0;for(let t=0;t<16;++t)e[o+t]=s[t];return e}return function(t,e=0){return(i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]).toLowerCase()}(s)}var s,a;(a=s||(s={})).FIRST_PARTY="firstParty",a.THIRD_PARTY="thirdParty";const c=["p.yotpo.com"],l=[s.FIRST_PARTY,s.THIRD_PARTY],d=t=>m("initializer","loaded",t),u=()=>window?.performance?.getEntries?.(),p=t=>{if(t){const e=t.find((t=>"navigation"===t.entryType));if(e)return e}return window?.performance?.timing},f=(t,e,n)=>{const i=t.filter((t=>t.name.includes(n)));if(i.length>0)return i.reduce(((t,n)=>n.startTime<=e&&n.startTime>t.startTime?n:t),i[0])},h=t=>{if(t){const e="startTime"in t?t.startTime:t.navigationStart;return Math.round(t.domContentLoadedEventStart-e)}},m=(t,e,n,i)=>{if(!n)return;const r=n.filter((n=>n.name===`yotpo:${t}:${e}`));if(r.length>0){const t=window.performance.now();let e;return i&&(e=r.find((t=>"detail"in t&&t.detail===i))),e||(e=r.reduce(((e,n)=>n.startTime<=t&&n.startTime>e.startTime?n:e),r[0])),Math.round(e.startTime)}};class g{static markWidgetLoaded(t){"undefined"!=typeof window&&window.performance&&window.performance.mark&&window.performance.mark(`yotpo:${t}:loaded`)}static markWidgetStart(t,e){"undefined"!=typeof window&&window.performance&&window.performance.mark&&window.performance.mark(`yotpo:${t}:start`,{detail:e})}static getDurationStats(){if("undefined"!=typeof window&&window.performance){const t=window.performance.now(),e=u(),n=e?.filter((t=>"mark"===t.entryType&&t.name.startsWith("yotpo"))),i=d(n),r=p(e),o=h(r),s=i?Math.round(t-i):void 0,a=o?Math.round(t-o):void 0;return{time_from_page_start:Math.round(t),time_from_init_start:s,time_from_dom_loaded:a,initializer_load_time:i,dom_loaded_time:o}}}static getWidgetDurationStats(t,e){if("undefined"!=typeof window&&window.performance){const n=window.performance.now(),i=u(),r=i?.filter((t=>"mark"===t.entryType&&t.name.startsWith("yotpo"))),o=(t=>m("loader","loaded",t))(r),s=d(r),a=m(t,"loaded",r),c=m(t,"start",r,e),l=p(i),g=h(l),y=(t=>{if(t&&t.loadEventEnd){const e="startTime"in t?t.startTime:t.navigationStart;return Math.round(t.loadEventEnd-e)}})(l),v=((t,e)=>{const n=e?.filter((t=>"resource"===t.entryType&&"script"===t.initiatorType));if(n&&n.length>0){const e=f(n,t,"cdn-widgetsrepository.yotpo.com/v1/loader");let i=f(n,t,"cdn-widget-assets.yotpo.com/widgets-initializer");i||(i=f(n,t,"cdn-widgetsrepository.yotpo.com/widget-assets/widgets-initializer"));const r=f(n,t,"cdn-widgetsrepository.yotpo.com/widget-assets/yotpo-pixel");return{loader_script_start:e?.startTime,loader_script_duration:e?.duration?Math.round(e.duration):void 0,initializer_script_start:i?.startTime,initializer_script_duration:i?.duration?Math.round(i.duration):void 0,analytics_script_start:r?.startTime,analytics_script_duration:r?.duration?Math.round(r.duration):void 0}}})(n,i),w=s?Math.round(n-s):void 0,b=c?Math.round(n-c):void 0,_=g?Math.round(n-g):void 0,k=o?Math.round(n-o):void 0;return{time_from_page_start:Math.round(n),time_from_init_start:w,time_from_initializer_mark:w,time_from_loader_mark:k,time_from_widget_mark:b,time_from_dom_loaded:_,initializer_load_time:s,widget_load_time:a,loader_load_time:o,dom_loaded_time:g,page_load_duration:y,loader_script_start:v?.loader_script_start,loader_script_duration:v?.loader_script_duration,initializer_script_start:v?.initializer_script_start,initializer_script_duration:v?.initializer_script_duration,analytics_script_start:v?.analytics_script_start,analytics_script_duration:v?.analytics_script_duration}}}}const y={};class v{constructor({guid:t,category:e,defaultContext:n,widgetUuid:i,preventEvents:r}){this.defaultContext={},this.loaded=!1,this.widgetLoaded=!1,this.storeId=t,this.category=e,this.widgetUuid=i,this.preventEvents=r,this.defaultContext=n,this.baseEventContext={session_id:i||o(),sequence:0}}compareReadonlySettings(t){return Object.keys(t).every((e=>t[e]===this[e]))}async trackWidgetLoaded(t,e,n){if(this.widgetLoaded)return!1;const i=await this.trackEvent("loaded",t,e,n,(t=>this.createLoadedEventContext(t)));return this.widgetLoaded=!0,i}async trackLoaded(t,e,n){return this.trackEvent("loaded",t,e,n)}async trackClickedOn(t,e,n){return this.trackEvent("clicked_on",t,e,n)}async trackShown(t,e,n){return this.trackEvent("shown",t,e,n)}async trackHovered(t,e,n){return this.trackEvent("hovered",t,e,n)}async trackHook(t,e,n){return this.trackEvent("hook",t,e,n)}async trackHidden(t,e,n){return this.trackEvent("hidden",t,e,n)}async trackFilterResults(t,e,n){return this.trackEvent("filter_results",t,e,n)}async trackError(t,e,n){return this.trackEvent("error",t,e,n)}async trackEvent(t,e,n,i,r){return this.preventEvents?Promise.resolve(!1):this.getYotpoAnalytics().then((()=>{const o=r?r(i):i;return this.trackInternal(this.createEvent(t,e,n,o))}))}async trackInternal(t){return this.yotpoAnalytics?(this.yotpoAnalytics.trackEvent(t.category,t.action,t.label,t.property,t.context),Promise.resolve(!0)):Promise.resolve(!1)}getYotpoAnalytics(){return this.loaded?Promise.resolve():(this.analyticsLoadingPromise||(this.analyticsLoadingPromise=new Promise(((t,e)=>{this.createYotpoAnalyticsWithRetries(10,t,e)})).then((()=>{this.loaded=!0}))),this.analyticsLoadingPromise)}createYotpoAnalytics(){const t={reporting_end_points:c,supportedCookies:l},e=this.storeId,n={getAnalyticsVersion:()=>"onsite_v3",getUserSetting:e=>t[e],getAppKey:()=>e};this.yotpoAnalytics=new window.yotpoWidgetsContainer.Analytics(n),this.pixelId=(t=>{const e={};return document.cookie.split(";").forEach((t=>{const[n,i]=t.split("=");e[n.trim()]=i})),e[t]||""})("yotpo_pixel")}createYotpoAnalyticsWithRetries(t,e,n){t<=0?e(!1):void 0!==window.Yotpo&&window?.yotpoWidgetsContainer?.Analytics?(this.createYotpoAnalytics(),e(!0)):setTimeout((()=>{t-=1,this.createYotpoAnalyticsWithRetries(t,e,n)}),50)}createLoadedEventContext(t){return{...t||{},duration:this.getWidgetDurationStats()}}createEvent(t,e,n,i){return{category:this.category,action:t,label:e,property:n,context:{...this.defaultContext,...i||{},session_id:this.baseEventContext.session_id,sequence:(this.baseEventContext.sequence++).toString(),pixel_id:this.pixelId}}}getWidgetDurationStats(){return g.getWidgetDurationStats(this.category,this.widgetUuid)}}class w{}__publicField(w,"category","star-ratings-widget");var b=Object.defineProperty,_=(t,e,n)=>(((t,e,n)=>{e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);function k(t){if(R(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=M(i)?O(i):k(i);if(r)for(const t in r)e[t]=r[t]}return e}return M(t)||B(t)?t:void 0}const S=/;(?![^(]*\))/g,x=/:(.+)/;function O(t){const e={};return t.split(S).forEach((t=>{if(t){const n=t.split(x);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function T(t){let e="";if(M(t))e=t;else if(R(t))for(let n=0;n<t.length;n++){const i=T(t[n]);i&&(e+=i+" ")}else if(B(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function C(t,e){if(t===e)return!0;let n=j(t),i=j(e);if(n||i)return!(!n||!i)&&t.getTime()===e.getTime();if(n=R(t),i=R(e),n||i)return!(!n||!i)&&function(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=C(t[i],e[i]);return n}(t,e);if(n=B(t),i=B(e),n||i){if(!n||!i)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t){const i=t.hasOwnProperty(n),r=e.hasOwnProperty(n);if(i&&!r||!i&&r||!C(t[n],e[n]))return!1}}return String(t)===String(e)}function E(t,e){return t.findIndex((t=>C(t,e)))}const P=Object.assign,L=Object.prototype.hasOwnProperty,A=(t,e)=>L.call(t,e),R=Array.isArray,F=t=>"[object Map]"===$(t),j=t=>t instanceof Date,M=t=>"string"==typeof t,D=t=>"symbol"==typeof t,B=t=>null!==t&&"object"==typeof t,I=Object.prototype.toString,$=t=>I.call(t),W=t=>M(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,N=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},z=/-(\w)/g,U=N((t=>t.replace(z,((t,e)=>e?e.toUpperCase():"")))),H=/\B([A-Z])/g,V=N((t=>t.replace(H,"-$1").toLowerCase())),K=t=>{const e=parseFloat(t);return isNaN(e)?t:e};function Y(t,e){(e=e||undefined)&&e.active&&e.effects.push(t)}const G=t=>{const e=new Set(t);return e.w=0,e.n=0,e},q=t=>(t.w&X)>0,Z=t=>(t.n&X)>0,J=new WeakMap;let Q=0,X=1;const tt=[];let et;const nt=Symbol(""),it=Symbol("");class rt{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],Y(this,n)}run(){if(!this.active)return this.fn();if(!tt.includes(this))try{return tt.push(et=this),ct.push(at),at=!0,X=1<<++Q,Q<=30?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=X})(this):ot(this),this.fn()}finally{Q<=30&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];q(r)&&!Z(r)?r.delete(t):e[n++]=r,r.w&=~X,r.n&=~X}e.length=n}})(this),X=1<<--Q,lt(),tt.pop();const t=tt.length;et=t>0?tt[t-1]:void 0}}stop(){this.active&&(ot(this),this.onStop&&this.onStop(),this.active=!1)}}function ot(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function st(t){t.effect.stop()}let at=!0;const ct=[];function lt(){const t=ct.pop();at=void 0===t||t}function dt(t,e,n){if(!at||void 0===et)return;let i=J.get(t);i||J.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=G()),function(t,e){let n=!1;Q<=30?Z(t)||(t.n|=X,n=!q(t)):n=!t.has(et),n&&(t.add(et),et.deps.push(t))}(r)}function ut(t,e,n,i,r,o){const s=J.get(t);if(!s)return;let a=[];if("clear"===e)a=[...s.values()];else if("length"===n&&R(t))s.forEach(((t,e)=>{("length"===e||e>=i)&&a.push(t)}));else switch(void 0!==n&&a.push(s.get(n)),e){case"add":R(t)?W(n)&&a.push(s.get("length")):(a.push(s.get(nt)),F(t)&&a.push(s.get(it)));break;case"delete":R(t)||(a.push(s.get(nt)),F(t)&&a.push(s.get(it)));break;case"set":F(t)&&a.push(s.get(nt))}if(1===a.length)a[0]&&pt(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);pt(G(t))}}function pt(t,e){for(const n of R(t)?t:[...t])(n!==et||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const ft=function(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}("__proto__,__v_isRef,__isVue"),ht=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(D)),mt=vt(),gt=vt(!0),yt=function(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Et(this);for(let e=0,r=this.length;e<r;e++)dt(n,0,e+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(Et)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){ct.push(at),at=!1;const n=Et(this)[e].apply(this,t);return lt(),n}})),t}();function vt(t=!1,e=!1){return function(n,i,r){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_raw"===i&&r===(t?e?xt:St:e?kt:_t).get(n))return n;const o=R(n);if(!t&&o&&A(yt,i))return Reflect.get(yt,i,r);const s=Reflect.get(n,i,r);return(D(i)?ht.has(i):ft(i))||(t||dt(n,0,i),e)?s:Pt(s)?o&&W(i)?s:s.value:B(s)?t?function(t){return Ct(t,!0,bt,null,St)}(s):Tt(s):s}}const wt={get:mt,set:function(t=!1){return function(e,n,i,r){let o=e[n];if(!t&&!function(t){return!(!t||!t.__v_isReadonly)}(i)&&(i=Et(i),o=Et(o),!R(e)&&Pt(o)&&!Pt(i)))return o.value=i,!0;const s=R(e)&&W(n)?Number(n)<e.length:A(e,n),a=Reflect.set(e,n,i,r);return e===Et(r)&&(s?((t,e)=>!Object.is(t,e))(i,o)&&ut(e,"set",n,i):ut(e,"add",n,i)),a}}(),deleteProperty:function(t,e){const n=A(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&ut(t,"delete",e,void 0),i},has:function(t,e){const n=Reflect.has(t,e);return(!D(e)||!ht.has(e))&&dt(t,0,e),n},ownKeys:function(t){return dt(t,0,R(t)?"length":nt),Reflect.ownKeys(t)}},bt={get:gt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},_t=new WeakMap,kt=new WeakMap,St=new WeakMap,xt=new WeakMap;function Ot(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>$(t).slice(8,-1))(t))}function Tt(t){return t&&t.__v_isReadonly?t:Ct(t,!1,wt,null,_t)}function Ct(t,e,n,i,r){if(!B(t)||t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=r.get(t);if(o)return o;const s=Ot(t);if(0===s)return t;const a=new Proxy(t,2===s?i:n);return r.set(t,a),a}function Et(t){const e=t&&t.__v_raw;return e?Et(e):t}function Pt(t){return Boolean(t&&!0===t.__v_isRef)}Promise.resolve();let Lt=!1;const At=[],Rt=Promise.resolve(),Ft=t=>Rt.then(t),jt=t=>{At.includes(t)||At.push(t),Lt||(Lt=!0,Ft(Mt))},Mt=()=>{for(const t of At)t();At.length=0,Lt=!1},Dt=/^(spellcheck|draggable|form|list|type)$/,Bt=({el:t,get:e,effect:n,arg:i,modifiers:r})=>{let o;"class"===i&&(t._class=t.className),n((()=>{let n=e();if(i)(null==r?void 0:r.camel)&&(i=U(i)),It(t,i,n,o);else{for(const e in n)It(t,e,n[e],o&&o[e]);for(const e in o)(!n||!(e in n))&&It(t,e,null)}o=n}))},It=(t,e,n,i)=>{if("class"===e)t.setAttribute("class",T(t._class?[t._class,n]:n)||"");else if("style"===e){n=k(n);const{style:e}=t;if(n)if(M(n))n!==i&&(e.cssText=n);else{for(const t in n)Wt(e,t,n[t]);if(i&&!M(i))for(const t in i)null==n[t]&&Wt(e,t,"")}else t.removeAttribute("style")}else t instanceof SVGElement||!(e in t)||Dt.test(e)?"true-value"===e?t._trueValue=n:"false-value"===e?t._falseValue=n:null!=n?t.setAttribute(e,n):t.removeAttribute(e):(t[e]=n,"value"===e&&(t._value=n))},$t=/\s*!important$/,Wt=(t,e,n)=>{R(n)?n.forEach((n=>Wt(t,e,n))):e.startsWith("--")?t.setProperty(e,n):$t.test(n)?t.setProperty(V(e),n.replace($t,""),"important"):t[e]=n},Nt=(t,e)=>{const n=t.getAttribute(e);return null!=n&&t.removeAttribute(e),n},zt=(t,e,n,i)=>{t.addEventListener(e,n,i)},Ut=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Ht=["ctrl","shift","alt","meta"],Vt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Ht.some((n=>t[`${n}Key`]&&!e[n]))},Kt=({el:t,get:e,exp:n,arg:i,modifiers:r})=>{if(!i)return;let o=Ut.test(n)?e(`(e => ${n}(e))`):e(`($event => { ${n} })`);if("vue:mounted"!==i){if("vue:unmounted"===i)return()=>o();if(r){"click"===i&&(r.right&&(i="contextmenu"),r.middle&&(i="mouseup"));const t=o;o=e=>{if(!("key"in e)||V(e.key)in r){for(const t in r){const n=Vt[t];if(n&&n(e,r))return}return t(e)}}}zt(t,i,o,r)}else Ft(o)},Yt=({el:t,get:e,effect:n})=>{n((()=>{t.textContent=Gt(e())}))},Gt=t=>null==t?"":B(t)?JSON.stringify(t,null,2):String(t),qt=t=>"_value"in t?t._value:t.value,Zt=(t,e)=>{const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e},Jt=t=>{t.target.composing=!0},Qt=t=>{const e=t.target;e.composing&&(e.composing=!1,Xt(e,"input"))},Xt=(t,e)=>{const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)},te=Object.create(null),ee=(t,e,n)=>ne(t,`return(${e})`,n),ne=(t,e,n)=>{const i=te[e]||(te[e]=ie(e));try{return i(t,n)}catch(r){}},ie=t=>{try{return new Function("$data","$el",`with($data){${t}}`)}catch(e){return()=>{}}},re={bind:Bt,on:Kt,show:({el:t,get:e,effect:n})=>{const i=t.style.display;n((()=>{t.style.display=e()?i:"none"}))},text:Yt,html:({el:t,get:e,effect:n})=>{n((()=>{t.innerHTML=e()}))},model:({el:t,exp:e,get:n,effect:i,modifiers:r})=>{const o=t.type,s=n(`(val) => { ${e} = val }`),{trim:a,number:c="number"===o}=r||{};if("SELECT"===t.tagName){const e=t;zt(t,"change",(()=>{const t=Array.prototype.filter.call(e.options,(t=>t.selected)).map((t=>c?K(qt(t)):qt(t)));s(e.multiple?t:t[0])})),i((()=>{const t=n(),i=e.multiple;for(let n=0,r=e.options.length;n<r;n++){const r=e.options[n],o=qt(r);if(i)R(t)?r.selected=E(t,o)>-1:r.selected=t.has(o);else if(C(qt(r),t))return void(e.selectedIndex!==n&&(e.selectedIndex=n))}!i&&-1!==e.selectedIndex&&(e.selectedIndex=-1)}))}else if("checkbox"===o){let e;zt(t,"change",(()=>{const e=n(),i=t.checked;if(R(e)){const n=qt(t),r=E(e,n),o=-1!==r;if(i&&!o)s(e.concat(n));else if(!i&&o){const t=[...e];t.splice(r,1),s(t)}}else s(Zt(t,i))})),i((()=>{const i=n();R(i)?t.checked=E(i,qt(t))>-1:i!==e&&(t.checked=C(i,Zt(t,!0))),e=i}))}else if("radio"===o){let e;zt(t,"change",(()=>{s(qt(t))})),i((()=>{const i=n();i!==e&&(t.checked=C(i,qt(t)))}))}else{const e=t=>a?t.trim():c?K(t):t;zt(t,"compositionstart",Jt),zt(t,"compositionend",Qt),zt(t,(null==r?void 0:r.lazy)?"change":"input",(()=>{t.composing||s(e(t.value))})),a&&zt(t,"change",(()=>{t.value=t.value.trim()})),i((()=>{if(t.composing)return;const i=t.value,r=n();document.activeElement===t&&e(i)===r||i!==r&&(t.value=r)}))}},effect:({el:t,ctx:e,exp:n,effect:i})=>{Ft((()=>i((()=>ne(e.scope,n,t)))))}},oe=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,se=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ae=/^\(|\)$/g,ce=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,le=(t,e,n)=>{const i=e.match(oe);if(!i)return;const r=t.nextSibling,o=t.parentElement,s=new Text("");o.insertBefore(s,t),o.removeChild(t);const a=i[2].trim();let c,l,d,u,p=i[1].trim().replace(ae,"").trim(),f=!1,h="key",m=t.getAttribute(h)||t.getAttribute(h=":key")||t.getAttribute(h="v-bind:key");m&&(t.removeAttribute(h),"key"===h&&(m=JSON.stringify(m))),(u=p.match(se))&&(p=p.replace(se,"").trim(),l=u[1].trim(),u[2]&&(d=u[2].trim())),(u=p.match(ce))&&(c=u[1].split(",").map((t=>t.trim())),f="["===p[0]);let g,y,v,w=!1;const b=(t,e,i,r)=>{const o={};c?c.forEach(((t,n)=>o[t]=e[f?n:t])):o[p]=e,r?(l&&(o[l]=r),d&&(o[d]=i)):l&&(o[l]=i);const s=be(n,o),a=m?ee(s.scope,m):i;return t.set(a,i),s.key=a,s},_=(e,n)=>{const i=new ke(t,e);return i.key=e.key,i.insert(o,n),i};return n.effect((()=>{const t=ee(n.scope,a),e=v;if([y,v]=(t=>{const e=new Map,n=[];if(R(t))for(let i=0;i<t.length;i++)n.push(b(e,t[i],i));else if("number"==typeof t)for(let i=0;i<t;i++)n.push(b(e,i+1,i));else if(B(t)){let i=0;for(const r in t)n.push(b(e,t[r],i++,r))}return[n,e]})(t),w){for(let e=0;e<g.length;e++)v.has(g[e].key)||g[e].remove();const t=[];let n,i,r=y.length;for(;r--;){const a=y[r],c=e.get(a.key);let l;null==c?l=_(a,n?n.el:s):(l=g[c],Object.assign(l.ctx.scope,a.scope),c!==r&&(g[c+1]!==n||i===n)&&(i=l,l.insert(o,n?n.el:s))),t.unshift(n=l)}g=t}else g=y.map((t=>_(t,s))),w=!0})),r},de=({el:t,ctx:{scope:{$refs:e}},get:n,effect:i})=>{let r;return i((()=>{const i=n();e[i]=t,r&&i!==r&&delete e[r],r=i})),()=>{r&&delete e[r]}},ue=/^(?:v-|:|@)/,pe=/\.([\w-]+)/g;let fe=!1;const he=(t,e)=>{const n=t.nodeType;if(1===n){const n=t;if(n.hasAttribute("v-pre"))return;let i;if(Nt(n,"v-cloak"),i=Nt(n,"v-if"))return((t,e,n)=>{const i=t.parentElement,r=new Comment("v-if");i.insertBefore(r,t);const o=[{exp:e,el:t}];let s,a;for(;(s=t.nextElementSibling)&&(a=null,""===Nt(s,"v-else")||(a=Nt(s,"v-else-if")));)i.removeChild(s),o.push({exp:a,el:s});const c=t.nextSibling;i.removeChild(t);let l,d=-1;const u=()=>{l&&(i.insertBefore(r,l.el),l.remove(),l=void 0)};return n.effect((()=>{for(let t=0;t<o.length;t++){const{exp:e,el:s}=o[t];if(!e||ee(n.scope,e))return void(t!==d&&(u(),l=new ke(s,n),l.insert(i,r),i.removeChild(r),d=t))}d=-1,u()})),c})(n,i,e);if(i=Nt(n,"v-for"))return le(n,i,e);if((i=Nt(n,"v-scope"))||""===i){const t=i?ee(e.scope,i):{};e=be(e,t),t.$template&&ve(n,t.$template)}const r=null!=Nt(n,"v-once");r&&(fe=!0),(i=Nt(n,"ref"))&&ye(n,de,`"${i}"`,e),me(n,e);const o=[];for(const{name:t,value:s}of[...n.attributes])ue.test(t)&&"v-cloak"!==t&&("v-model"===t?o.unshift([t,s]):"@"===t[0]||/^v-on\b/.test(t)?o.push([t,s]):ge(n,t,s,e));for(const[t,s]of o)ge(n,t,s,e);r&&(fe=!1)}else if(3===n){const n=t.data;if(n.includes(e.delimiters[0])){let i,r=[],o=0;for(;i=e.delimitersRE.exec(n);){const t=n.slice(o,i.index);t&&r.push(JSON.stringify(t)),r.push(`$s(${i[1]})`),o=i.index+i[0].length}o<n.length&&r.push(JSON.stringify(n.slice(o))),ye(t,Yt,r.join("+"),e)}}else 11===n&&me(t,e)},me=(t,e)=>{let n=t.firstChild;for(;n;)n=he(n,e)||n.nextSibling},ge=(t,e,n,i)=>{let r,o,s;if(":"===(e=e.replace(pe,((t,e)=>((s||(s={}))[e]=!0,""))))[0])r=Bt,o=e.slice(1);else if("@"===e[0])r=Kt,o=e.slice(1);else{const t=e.indexOf(":"),n=t>0?e.slice(2,t):e.slice(2);r=re[n]||i.dirs[n],o=t>0?e.slice(t+1):void 0}r&&(r===Bt&&"ref"===o&&(r=de),ye(t,r,n,i,o,s),t.removeAttribute(e))},ye=(t,e,n,i,r,o)=>{const s=e({el:t,get:(e=n)=>ee(i.scope,e,t),effect:i.effect,ctx:i,exp:n,arg:r,modifiers:o});s&&i.cleanups.push(s)},ve=(t,e)=>{if("#"!==e[0])t.innerHTML=e;else{const n=document.querySelector(e);t.appendChild(n.content.cloneNode(!0))}},we=t=>{const e={delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g,...t,scope:t?t.scope:Tt({}),dirs:t?t.dirs:{},effects:[],blocks:[],cleanups:[],effect:t=>{if(fe)return jt(t),t;const n=function(t,e){t.effect&&(t=t.effect.fn);const n=new rt(t);e&&(P(n,e),e.scope&&Y(n,e.scope)),(!e||!e.lazy)&&n.run();const i=n.run.bind(n);return i.effect=n,i}(t,{scheduler:()=>jt(n)});return e.effects.push(n),n}};return e},be=(t,e={})=>{const n=t.scope,i=Object.create(n);Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),i.$refs=Object.create(n.$refs);const r=Tt(new Proxy(i,{set:(t,e,i,o)=>o!==r||t.hasOwnProperty(e)?Reflect.set(t,e,i,o):Reflect.set(n,e,i)}));return _e(r),{...t,scope:r}},_e=t=>{for(const e of Object.keys(t))"function"==typeof t[e]&&(t[e]=t[e].bind(t))};class ke{constructor(t,e,n=!1){_(this,"template"),_(this,"ctx"),_(this,"key"),_(this,"parentCtx"),_(this,"isFragment"),_(this,"start"),_(this,"end"),this.isFragment=t instanceof HTMLTemplateElement,n?this.template=t:this.isFragment?this.template=t.content.cloneNode(!0):this.template=t.cloneNode(!0),n?this.ctx=e:(this.parentCtx=e,e.blocks.push(this),this.ctx=we(e)),he(this.template,this.ctx)}get el(){return this.start||this.template}insert(t,e=null){if(this.isFragment)if(this.start){let n,i=this.start;for(;i&&(n=i.nextSibling,t.insertBefore(i,e),i!==this.end);)i=n}else this.start=new Text(""),this.end=new Text(""),t.insertBefore(this.end,e),t.insertBefore(this.start,this.end),t.insertBefore(this.template,this.end);else t.insertBefore(this.template,e)}remove(){if(this.parentCtx&&((t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)})(this.parentCtx.blocks,this),this.start){const t=this.start.parentNode;let e,n=this.start;for(;n&&(e=n.nextSibling,t.removeChild(n),n!==this.end);)n=e}else this.template.parentNode.removeChild(this.template);this.teardown()}teardown(){this.ctx.blocks.forEach((t=>{t.teardown()})),this.ctx.effects.forEach(st),this.ctx.cleanups.forEach((t=>t()))}}const Se=t=>t.replace(/[-.*+?^${}()|[\]\/\\]/g,"\\$&"),xe=t=>{const e=we();if(t&&(e.scope=Tt(t),_e(e.scope),t.$delimiters)){const[n,i]=e.delimiters=t.$delimiters;e.delimitersRE=new RegExp(Se(n)+"([^]+?)"+Se(i),"g")}let n;return e.scope.$s=Gt,e.scope.$nextTick=Ft,e.scope.$refs=Object.create(null),{directive(t,n){return n?(e.dirs[t]=n,this):e.dirs[t]},mount(t){if("string"==typeof t&&!(t=document.querySelector(t)))return;let i;return i=(t=t||document.documentElement).hasAttribute("v-scope")?[t]:[...t.querySelectorAll("[v-scope]")].filter((t=>!t.matches("[v-scope] [v-scope]"))),i.length||(i=[t]),n=i.map((t=>new ke(t,e,!0))),this},unmount(){n.forEach((t=>t.teardown()))}}},Oe=document.currentScript;Oe&&Oe.hasAttribute("init")&&xe().mount();var Te=(t=>(t.PRODUCT="product",t.CATEGORY="collection",t.HOME="index",t.CART="cart",t))(Te||{});const Ce=(t,e)=>{if(void 0!==t&&""!==t)switch(typeof t){case"string":return["true","false"].includes(t)?"true"===t:t;case"boolean":return t}return e},Ee=["view-alignment","bottom-line-enable","bottom-line-text","view-text-color","rating-score-enable"],Pe=t=>null==t,Le=t=>"true"===t||"false"===t?"true"===t:t,Ae=(t,e)=>t.hasOwnProperty("getter")?t.getter(e):e,Re=(t,e,n)=>t.hasOwnProperty("getter")?t.getter(e,n):n,Fe=(t,e)=>{if(!t.hasOwnProperty("getIdAttribute"))throw new Error(`No getIdAttribute method was specified for regex item "${t}"`);const n=[],i=new RegExp(t.regex);for(const r in e)if(r.match(i)){let i=Le(e[r]);i=Re(t,r,e[r]);const{id:o,attribute:s}=t.getIdAttribute(r)||{};if(!Pe(o)&&s){const e=n.find((t=>t.id===o));e?e[s]=i:n.push({...t.defaults,id:o,[s]:i})}}return n};class je{static mapValuesToKeys(t,e,n=!0){const i={};for(const r in t){let o;const s=t[r];if(s.key){const t=s.key.toLowerCase();o=s.default,e[t]&&(o=Le(e[t])),o=Ae(s,o)}else if("regex"===s.type)o=Fe(s,e);else{if(""===s.key&&n)throw new Error(`No key was specified for "${r}"`);o=!s.hasOwnProperty("key")&&s.hasOwnProperty("default")?s.default:je.mapValuesToKeys(s,e)}i[r]=o}return i}static defaults(t){return je.mapValuesToKeys(t,{})}static getCustomizationKeys(t){const e={};for(const n in t){let i;const r=t[n];i=r.key?r.key.toLowerCase():je.getCustomizationKeys(r),e[n]=i}return e}}const Me={MOBILE:"S",TABLET:"SM",LAPTOP:"M",DESKTOP:"L"},De="#2e4f7c",Be="#e7721b",Ie="#555555",$e="#FFFFFF";const We=new class{calcDisplayType(t){return Me[t]}};class Ne{getDeviceType(){return Ne.isMobileDevice()?"MOBILE":Ne.deviceTypeByWidth()}static isMobileDevice(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/\bAndroid(?:.+)Mobile\b/i)||navigator.userAgent.match(/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i)||navigator.userAgent.match(/\bokhttp\b/i)||navigator.userAgent.match(/\bWindows(?:.+)ARM\b/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/BB10/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/\b(CriOS|Chrome)(?:.+)Mobile/i)||navigator.userAgent.match(/Mobile(?:.+)Firefox\b/i)||navigator.userAgent.match(/Windows Phone/i))}static deviceTypeByWidth(){return window.innerWidth<480?"MOBILE":window.innerWidth<1440?"LAPTOP":"DESKTOP"}}const ze=new Ne;var Ue={},He={},Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.emptyFont=void 0;Ve.emptyFont={url:"",family:"",weight:"",style:""},Object.defineProperty(He,"__esModule",{value:!0}),He.FontService=void 0;var Ke=Ve;function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Je=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"getFontFamily",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";return this.getFontParts(t,e).family}},{key:"getFontUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";return this.getFontParts(t,e).url}},{key:"getFontWeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"|";return this.getFontParts(t,e).weight}},{key:"getFontStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"|";return this.getFontParts(t,e).style}},{key:"getPixelFontSize",value:function(t){return t?"px"===(t=t.toString()).slice(-2)?t:t+"px":""}},{key:"loadFont",value:function(t,e){var n=document.createElement("style"),i="";t.url.includes("fonts.googleapis.com/css")?i="@import url('".concat(t.url,"');"):t.url&&(i='\n      @font-face {\n        font-family: "'.concat(t.family,"\";\n        src: url('").concat(t.url,"');\n      }")),n.innerHTML=i,e.appendChild(n)}},{key:"calulcateMobileFontSize",value:function(t){var e=.8*parseInt(t,10);return e<=14?14:e}},{key:"getFontParts",value:function(e,n){if(!e)return Ke.emptyFont;n||(n=2===e.split("#").length?"#":"|");var i=e.split(n);if(1==i.length)return Ge(Ge({},Ke.emptyFont),{},{family:i[0]});var r=i[1];return Ge(Ge({},t.getFontStyleParts(i[0])),{},{url:r})}},{key:"getFontStyleParts",value:function(t){var e=t.split("@");if(1==e.length)return{family:t,style:"",weight:""};var n=e[0],i=e[1],r=null!==i.match(/i$/);return{weight:r?i.substring(0,i.length-1):i,style:r?"italic":"normal",family:n}}}],(n=null)&&Ze(e.prototype,n),i&&Ze(e,i),t}();He.FontService=Je,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=He;Object.keys(e).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}));var n=Ve;Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}))}(Ue);var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});var Xe=Qe.ObjectUtils=void 0;function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach((function(e){nn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nn(t,e,n){return(e=sn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rn(t){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function on(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,sn(i.key),i)}}function sn(t){var e=function(t,e){if("object"!==rn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rn(e)?e:String(e)}var an=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"removeEmptyFields",value:function(e){return e&&Object.keys(e).forEach((function(n){e[n]&&"object"===rn(e[n])?t.removeEmptyFields(e[n]):void 0!==e[n]&&null!==e[n]&&""!==e[n]||delete e[n]})),e}},{key:"htmlDecodeDeep",value:function(e){return e&&Object.keys(e).forEach((function(n){e[n]&&"object"===rn(e[n])?t.htmlDecodeDeep(e[n]):e[n]&&(e[n]=t.decode(e[n]))})),e}},{key:"decode",value:function(t){return(new DOMParser).parseFromString("<!doctype html><body>"+t,"text/html").body.textContent}},{key:"deepMerge",value:function(){for(var e={},n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(var o=0,s=i;o<s.length;o++){var a=s[o];if(a instanceof Object&&!Array.isArray(a))for(var c=0,l=Object.keys(a);c<l.length;c++){var d=l[c],u=a[d];u instanceof Object&&d in e&&(u=t.deepMerge(e[d],u)),e=en(en({},e),{},nn({},d,u))}}return e}}],(n=null)&&on(e.prototype,n),i&&on(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Xe=Qe.ObjectUtils=an;const cn=(t,e)=>{if(!t)return e;return t.includes("#")?t:ln(t,e)},ln=(t,e)=>{if(!t)return e;const n=t.match(/\d+/g)||[];let[i,r,o,s]=n;return i=i.toString(16),r=r.toString(16),o=o.toString(16),s=Math.round(255*s).toString(16),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),1==o.length&&(o="0"+o),1==s.length&&(s="0"+s),`#${i}${r}${o}${s}`},dn=t=>{const e={isMobileOverride:{default:!1,key:"is-mobile"},primaryColor:{default:De,key:"view-primary-color"},starsColor:{default:Be,key:"view-stars-color"},textColor:{default:Ie,key:"view-text-color"},alignment:{default:"left",key:"view-alignment"},primaryFont:{font:{family:{default:"Nunito Sans@400|https://cdn-widgetsrepository.yotpo.com/web-fonts/css/nunito_sans/v1/nunito_sans_400.css",key:"view-primary-font",getter:t=>Ue.FontService.getFontFamily(t,"|")},url:{default:"Nunito Sans@400|https://cdn-widgetsrepository.yotpo.com/web-fonts/css/nunito_sans/v1/nunito_sans_400.css",key:"view-primary-font",getter:t=>Ue.FontService.getFontUrl(t,"|")},weight:{default:"Nunito Sans@400|https://cdn-widgetsrepository.yotpo.com/web-fonts/css/nunito_sans/v1/nunito_sans_400.css",key:"view-primary-font",getter:t=>Ue.FontService.getFontWeight(t)},style:{default:"Nunito Sans@400|https://cdn-widgetsrepository.yotpo.com/web-fonts/css/nunito_sans/v1/nunito_sans_400.css",key:"view-primary-font",getter:t=>Ue.FontService.getFontStyle(t)}}},previewHtmlContainer:{key:"view-preview-html-container",default:""}},n=Xe.removeEmptyFields(t),i={deviceType:"DESKTOP",displayType:"L",primaryColor:cn(n["view-primary-color"],De),starsColor:cn(n["view-stars-color"],Be),emptyStarsColor:$e,textColor:cn(n["view-text-color"],Ie),alignment:Ce(t["view-alignment"],"left"),primaryFont:{font:{family:"'Nunito Sans'",url:"Nunito Sans@400|https://cdn-widgetsrepository.yotpo.com/web-fonts/css/nunito_sans/v1/nunito_sans_400.css",weight:"400",style:"normal",size:"14"}},previewHtmlContainer:Ce(n["view-preview-html-container"],"")},r=je.mapValuesToKeys(e,n);return null!=!n["is-mobile"]?(r.deviceType=ze.getDeviceType(),r.displayType=We.calcDisplayType(r.deviceType)):n["is-mobile"].toLowerCase()&&(r.deviceType="MOBILE",r.displayType="S"),{...i,...r}};class un{constructor(t,e,n={},i={},r="",o="",s="",a="",c={}){__publicField(this,"store"),__publicField(this,"config"),__publicField(this,"actions"),this.createStore(t,e,n,i,r,o,s,a,c)}async awaitInitComplete(){let t=1;for(;!this.store&&t<=3;)await new Promise((e=>setTimeout(e,3e3*t))),t++;return Promise.resolve()}getStore(){return{store:this.store,config:this.config,actions:this.actions}}getConfig(){return{config:this.config,actions:this.actions}}createConfig(t,e,n={},i={},r="",s="",a="",c="",l={}){const d=[`yotpo_stars_gradient_${Math.random()}`,`yotpo_stars_gradient_${Math.random()}`,`yotpo_stars_gradient_${Math.random()}`,`yotpo_stars_gradient_${Math.random()}`,`yotpo_stars_gradient_${Math.random()}`];return{element:t,productId:s||"4713994911841",sectionId:n["data-yotpo-section-id"],storeId:r,sessionId:o(),instanceId:a,instanceVersionId:c,startLoadDate:l.startLoadDate||new Date,widgetUuid:e,showBottomLine:Ce(n["bottom-line-enable"],!0),showText:Ce(n["bottom-line-enable"],!0),showRatingScore:Ce(n["rating-score-enable"],!1),enableEmptyState:Ce(n["empty-state-enable"],!0),bottomLineText:n["bottom-line-text"]||"{{reviews_count}} Reviews",scrollToMainWidgetOnClick:Ce(n["scroll-main-widget-enable"],!0),enableAddReview:Ce(n["add-review-enable"],!1),buttonText:Ce(n["write-a-review-text"],"Write a review"),isReadOnly:Ce(n["mode-read-only"],!1),isPreview:Ce(n["mode-preview"],!1),isEmptyState:Ce(n["mode-empty-state"],!1),isLoading:Ce(n["mode-is-loading"],!1),rtl:Ce(n.rtl,!1),staticContent:i,starsIds:d,...dn(n)}}createActions(){const t=this.config.isPreview||this.config.isReadOnly,e={widget_instance_id:this.config.instanceId,instance_version_id:this.config.instanceVersionId,store_id:this.config.storeId,product_id:this.config.productId,device_type:this.config.deviceType,widget_location:pn(this.config.sectionId)},n=(t=>{const{guid:e,category:n}=t,i=`${e}_${n}`;return y[i]?(y[i]?.compareReadonlySettings(t),y[i]):(y[i]=new v(t),y[i])})({guid:this.config.storeId,defaultContext:e,widgetUuid:this.config.widgetUuid,category:w.category,preventEvents:t});this.actions=(t=this)=>({showEmptyState:()=>t.config.enableEmptyState&&(0===t.store.totalReviews||t.config.isEmptyState)&&t.store.bottomlineLoaded,getBottomLineText:()=>t.config.bottomLineText.replace("{{reviews_count}}",t.store.totalReviews.toString()),isRTL:()=>t.config.rtl,trackAppShown(t){n.trackShown("app",void 0,{app_load_duration:t.appLoadDuration})},trackError(t){n.trackError(t.label,void 0,{error_message:t.errorMessage})},trackClicked(t){n.trackClickedOn(t.label,t.property,t.context||{})},async trackWidgetLoaded(e){if(!t.config.enableEmptyState&&0===t.store.totalReviews)return;const i={...e.context,status:"ok",duration:n.getWidgetDurationStats(),empty_state:t.config.enableEmptyState&&0===t.store.totalReviews};await n.trackWidgetLoaded("widget","widget",i)}})}async createStore(t,e,n={},i={},r="",o="",s="",a="",c={}){this.config=this.createConfig(t,e,n,i,r,o,s,a,c),this.store=Tt(this.getReactiveState()),this.createActions()}getReactiveState(){return{sequence:0,analyticsLoaded:!1,bottomlineLoaded:!1,averageScore:0,totalReviews:0,commit(t,e){switch(t){case"loaded":this.bottomlineLoaded=e;break;case"totalReviews":this.totalReviews=e;break;case"averageScore":this.averageScore=parseFloat(e.toFixed(1));break;case"sequence":this.sequence=e}},storeLoaded:!0}}}function pn(t){switch(t){case Te.PRODUCT:return"PRODUCT";case Te.CART:return"CART";case Te.CATEGORY:return"CATEGORY";case Te.HOME:return"HOMEPAGE";default:return"OTHER"}}var fn={};function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(fn,"__esModule",{value:!0});fn.HttpService=void 0;function mn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mn(Object(n),!0).forEach((function(e){yn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yn(t,e,n){return(e=wn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wn(i.key),i)}}function wn(t){var e=function(t,e){if("object"!==hn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==hn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===hn(e)?e:String(e)}var bn=function(t){return t.GET="get",t.POST="post",t}(bn||{}),_n=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BASE_URL=e,this.PREVIEW_DATA_PATH=n}var e,n,i;return e=t,n=[{key:"get",value:function(t,e){return this.restFactory({url:this.BASE_URL+t,method:bn.GET,headers:e})}},{key:"post",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json";return this.restFactory({url:this.BASE_URL+t,method:bn.POST,headers:e,body:n,contentType:i})}},{key:"getAsset",value:function(t,e){return this.restFactory({url:this.PREVIEW_DATA_PATH+t,method:bn.GET,headers:e})}},{key:"restFactory",value:function(t){var e=this,n=t.url,i=t.method,r=t.contentType,o=void 0===r?"json":r,s=t.body,a=t.headers,c=new Date,l=this.getPreparedFetchOptions({method:i,contentType:o,headers:a,body:s});return this.fetchData(n,l).then((function(t){return e.hydrateWithMetadata(t,c)})).catch((function(t){throw e.hydrateWithMetadata(t,c)}))}},{key:"prepareBody",value:function(t){if(null!=t)return"string"==typeof t||t instanceof Blob||t instanceof FormData||t instanceof ArrayBuffer||t instanceof URLSearchParams||t instanceof ReadableStream?t:JSON.stringify(t)}},{key:"getPreparedFetchOptions",value:function(t){var e=t.method,n=t.contentType,i=void 0===n?"json":n,r=t.body,o=t.headers;return{method:e,headers:gn({Accept:"application/json","Content-Type":"application/".concat(i)},o),credentials:"omit",body:this.prepareBody(r),redirect:"follow"}}},{key:"hydrateWithMetadata",value:function(t,e){var n=new Date;return gn(gn({},t),{},{config:{yometadata:{startTime:e,endTime:n,duration:n.getTime()-e.getTime()}}})}},{key:"fetchData",value:function(t,e){return fetch(t,e).catch((function(t){return Promise.reject({data:null,status:{code:null,message:null==t?void 0:t.message}})})).then((function(t){return t.json().then((function(e){if(null!=t&&t.ok)return{data:e,status:{code:t.status,message:t.statusText}};throw{data:null,status:{code:t.status,message:null==e?void 0:e.message}}}))}))}}],n&&vn(e.prototype,n),i&&vn(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();const kn=new(fn.HttpService=_n)("https://api-cdn.yotpo.com",""),Sn={get:(t,e)=>kn.get(t,e)};const xn=new class{getBottomLineData(t,e){const n=`/v2/bottom_lines/store/${t}/product/${e}`;return Sn.get(n)}};const On=new class{async fetchBottomLineData(t,e,n){const i=n();t.commit("loaded",!1);const r=Ce(e.isReadOnly,!1),o=Ce(e.isPreview,!1),s=Ce(e.isEmptyState,!1);if(r||o){const e=s?0:25,n=s?0:4.5;return t.commit("totalReviews",e),t.commit("averageScore",n),void t.commit("loaded",!0)}const a=e.storeId??"",c=e.productId??"";xn.getBottomLineData(a,c).then((e=>{t.commit("totalReviews",e.data.bottomline.totalReviews),t.commit("averageScore",e.data.bottomline.averageScore),i.trackWidgetLoaded({context:{bottom_lines_api:e.config.yometadata.duration}})})).catch((t=>{const e=t.response?.data?.status?.message??"Failed to fetch bottom lines";i.trackError({label:"get_bottom_lines_error",errorMessage:e}),i.trackWidgetLoaded({context:{bottom_lines_api:0}})})).finally((()=>{t.commit("loaded",!0)}))}},Tn=t=>{t.effect((()=>{const e=t.get().callback,n=new IntersectionObserver((t=>{t.find((t=>t.isIntersecting||t.intersectionRatio>0))&&(e(),n.disconnect())}),{threshold:[0]}),i=t.el?t.el:null;i&&n.observe(i)}))},Cn='\n<div v-cloak v-scope\n    v-if="showApp()"\n    v-intersection="setIntersection()"\n    class="yotpo-reviews-star-ratings-widget"\n    :class="getStarRatingsClass()"\n\t\t:style="setStyle()">\n\t<div class="yotpo-widget-clear">\n\t\t<div class="yotpo-bottom-line-scroll-panel"\n      :style="getScrollPanelStyle()">\n        <div class="yotpo-sr-bottom-line-summary"\n             :style="getSummaryStyle()"\n             @click="scrollToMainWidget()">\n             <div :style="getStarsStyle()">\n\t\t\t\t\t\t\t<div v-for="star in 5" :class="getStarContainerClass(star)" :style="getStarContainerStyle(star)">\n\t\t\t\t\t\t\t\t<svg :width="starDimensions()" :height="starDimensions()" viewBox="0 0 18 18"\n\t\t\t\t\t\t\t\t\t\t xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t\t<linearGradient :id="gradientId(star)">\n\t\t\t\t\t\t\t\t\t\t\t<stop :offset="fillPercent(star)" :stop-color="config.starsColor"/>\n\t\t\t\t\t\t\t\t\t\t\t<stop :offset="fillPercent(star)" :stop-color="config.emptyStarsColor" stop-opacity="1"/>\n\t\t\t\t\t\t\t\t\t\t</linearGradient>\n\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\td="M9 14.118L14.562 17.475L13.086 11.148L18 6.891L11.529 6.342L9 0.375L6.471 6.342L0 6.891L4.914 11.148L3.438 17.475L9 14.118Z"\n\t\t\t\t\t\t\t\t\t\t:stroke="config.starsColor"\n\t\t\t\t\t\t\t\t\t\t:fill="gradientUrl(star)"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n            \t</div>\n            \t <template v-if="showAverageScore()" :style="{\n            \'display\': \'flex\',\n            \'margin-left\': \'5px\'}">\n            <div class="yotpo-sr-bottom-line-left-panel yotpo-sr-bottom-line-score"\n                tabindex="0"\n                role="link"\n                 :style="getBottomLineLeftPanelStyle()"\n                 :aria-label="getAverageScoreLabel()">\n              {{ store.averageScore }}\n            </div>\n          </template>\n            \t</div>\n          <template v-if="showVerticalReviewsNumberBorder()">\n            <div class="yotpo-sr-vertical-border" :style="getVerticalBorderStyle()" />\n          </template>\n          <template v-if="showBottomLine()">\n            <div class="yotpo-sr-bottom-line-right-panel">\n              <div class="yotpo-sr-bottom-line-text yotpo-sr-bottom-line-text--right-panel"\n                   :style="{\n                     \'white-space\': \'nowrap\',\n                     \'font-size\': \'16px\',\n                     \'line-height\': \'18px\',\n                     \'text-align\': \'start\',\n                     \'font-family\': primaryFontFamily(),\n                     \'font-style\': primaryFontStyle(),\n                     \'font-weight\': primaryFontWeight(),\n                     \'color\': textColor()\n                   }">\n                {{ methods.getBottomLineText() }}\n              </div>\n            </div>\n          </template>\n          <template v-if="showNewReviewBtnBorder()">\n            <div class="yotpo-sr-vertical-border yotpo-sr-vertical-border--new-review-btn" />\n          </template>\n        </div>\n        <template v-if="showAddReview()">\n          <div class="yotpo-sr-bottom-line-new-review"\n               :style="getBottomLineNewReview()"\n               @click="clickOnPostNewReview()">\n            {{ config.buttonText }}\n          </div>\n        </template>\n    </div>\n  </div>\n</div>\n';class En{constructor(t){this.init(t)}async init(t){const{store:e,config:n,actions:i}=t.getStore(),r=n.isReadOnly?document.getElementsByClassName("widget-placeholder-container"):n.element,o=i();await On.fetchBottomLineData(e,n,i);const s=document.head||document.getElementsByTagName("head")[0],a=s.getElementsByClassName("yotpo-reviews-star-ratings-widget-css");if(!a||0==a.length){const t=document.createElement("style");t.setAttribute("class","yotpo-reviews-star-ratings-widget-css"),s.appendChild(t),t.appendChild(document.createTextNode("\n.yotpo-reviews-star-ratings-widget {\ndisplay: flex;\n  a:empty, article:empty, div:empty, dl:empty, h1:empty, h2:empty, h3:empty, h4:empty, h5:empty, h6:empty, p:empty, section:empty, ul:empty {\n    display: block;\n  }\n}\n[v-cloak] {\n\tdisplay: none;\n}\n\n.yotpo-star-ratings-clickable {\n    cursor: pointer;\n}\n\n.yotpo-widget-clear {\n  animation: none;\n  animation-delay: 0;\n  animation-direction: normal;\n  animation-duration: 0;\n  animation-fill-mode: none;\n  animation-iteration-count: 1;\n  animation-name: none;\n  animation-play-state: running;\n  animation-timing-function: ease;\n  backface-visibility: visible;\n  background: 0;\n  background-attachment: scroll;\n  background-clip: border-box;\n  background-color: transparent;\n  background-image: none;\n  background-origin: padding-box;\n  background-position: 0 0;\n  background-position-x: 0;\n  background-position-y: 0;\n  background-repeat: repeat;\n  background-size: auto auto;\n  border: 0;\n  border-style: none;\n  border-width: medium;\n  border-color: inherit;\n  border-bottom: 0;\n  border-bottom-color: inherit;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-style: none;\n  border-bottom-width: medium;\n  border-collapse: separate;\n  border-image: none;\n  border-left: 0;\n  border-left-color: inherit;\n  border-left-style: none;\n  border-left-width: medium;\n  border-radius: 0;\n  border-right: 0;\n  border-right-color: inherit;\n  border-right-style: none;\n  border-right-width: medium;\n  border-spacing: 0;\n  border-top: 0;\n  border-top-color: inherit;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border-top-style: none;\n  border-top-width: medium;\n  bottom: auto;\n  box-shadow: none;\n  box-sizing: content-box;\n  caption-side: top;\n  clear: none;\n  clip: auto;\n  color: inherit;\n  columns: auto;\n  column-count: auto;\n  column-fill: balance;\n  column-gap: normal;\n  column-rule: medium none currentColor;\n  column-rule-color: currentColor;\n  column-rule-style: none;\n  column-rule-width: none;\n  column-span: 1;\n  column-width: auto;\n  content: normal;\n  counter-increment: none;\n  counter-reset: none;\n  cursor: auto;\n  direction: ltr;\n  display: inline;\n  empty-cells: show;\n  float: none;\n  font: normal;\n  font-family: var(--primary-font-family);\n  font-style: var(--primary-font-style);\n  font-weight: var(--primary-font-weight);\n  font-size: medium;\n  font-variant: normal;\n  height: auto;\n  hyphens: none;\n  left: auto;\n  letter-spacing: normal;\n  line-height: normal;\n  list-style: none;\n  list-style-image: none;\n  list-style-position: outside;\n  list-style-type: disc;\n  margin: 0;\n  margin-bottom: 0;\n  margin-left: 0;\n  margin-right: 0;\n  margin-top: 0;\n  max-height: none;\n  max-width: none;\n  min-height: 0;\n  min-width: 0;\n  opacity: 1;\n  orphans: 0;\n  outline: 0;\n  outline-color: invert;\n  outline-style: none;\n  outline-width: medium;\n  overflow: visible;\n  overflow-x: visible;\n  overflow-y: visible;\n  padding: 0;\n  padding-bottom: 0;\n  padding-left: 0;\n  padding-right: 0;\n  padding-top: 0;\n  page-break-after: auto;\n  page-break-before: auto;\n  page-break-inside: auto;\n  perspective: none;\n  perspective-origin: 50% 50%;\n  position: static;\n  right: auto;\n  tab-size: 8;\n  table-layout: auto;\n  text-align: inherit;\n  text-align-last: auto;\n  text-decoration: none;\n  text-decoration-color: inherit;\n  text-decoration-line: none;\n  text-decoration-style: solid;\n  text-indent: 0;\n  text-shadow: none;\n  text-transform: none;\n  top: auto;\n  transform: none;\n  transform-style: flat;\n  transition: none;\n  transition-delay: 0s;\n  transition-duration: 0s;\n  transition-property: none;\n  transition-timing-function: ease;\n  unicode-bidi: normal;\n  vertical-align: baseline;\n  visibility: visible;\n  white-space: normal;\n  word-break: normal;\n  widows: 0;\n  width: auto;\n  word-spacing: normal;\n  z-index: auto;\n}\n"))}if(r.length&&n.isReadOnly)for(let l=0;l<r.length;l++)r[l].insertAdjacentHTML("beforeend",Cn);else r.insertAdjacentHTML("beforeend",Cn);const c=xe({store:e,config:n,methods:o,bottomlineLoaded(){const t=this.store.bottomlineLoaded;return!0===t||"true"===t},showApp(){return 0===this.store.totalReviews?this.methods.showEmptyState():this.bottomlineLoaded()},showRatingScore(){const t=this.config.showRatingScore;return!0===t||"true"===t},showBottomLine(){const t=this.config.showBottomLine;return!0===t||"true"===t},enableAddReview(){const t=this.config.enableAddReview;return!0===t||"true"===t},scrollToMainWidgetOnClick(){const t=this.config.scrollToMainWidgetOnClick;return!0===t||"true"===t},showAverageScore(){return this.showRatingScore()&&!this.methods.showEmptyState()},averageScoreColor(){return this.config.starsColor},textColor(){return this.config.textColor},primaryFontFamily(){return this.config.primaryFont.font.family},primaryFontStyle(){return this.config.primaryFont.font.style},alignment(){return this.config.alignment},primaryFontWeight(){return this.config.primaryFont.font.weight},getAverageScoreLabel(){return`${this.store.averageScore} out of 5 star rating`},showVerticalReviewsNumberBorder(){const t=this.showBottomLine(),e=this.showRatingScore(),n=this.methods.showEmptyState(),i=this.shouldBreakTextLine();return t&&e&&!n&&!i},showAddReview(){return this.methods.showEmptyState()&&this.enableAddReview()},showNewReviewBtnBorder(){return this.showAddReview()&&!this.shouldBreakTextLine()},gradientId(t){return this.config.starsIds[t-1]},gradientUrl(t){return`url('#${this.gradientId(t)}')`},fillPercent(t){return`${100*this.fill(t)}%`},starDimensions(){return"MOBILE"===this.config.deviceType?14:15},fill(t){return t<=this.store.averageScore+.25?1:t<=this.store.averageScore+.75?.5:0},getStarContainerClass(t){const e=this.fill(t);return`star-container ${1===e?"yotpo-sr-star-full":.5===e?"yotpo-sr-star-half":"yotpo-sr-star-empty"}`},getStarRatingsClass(){const t=`yotpo-display-${this.config.displayType.toLowerCase()}`;return["yotpo-star-ratings-widget-override-css",`yotpo-device-${this.config.deviceType.toLowerCase()}`,t,this.scrollToMainWidgetOnClick()||this.enableAddReview()?"yotpo-star-ratings-clickable":""]},getBreakBottomlineAlignment(){switch(this.alignment()){case"left":default:return"flex-start";case"center":return"center";case"right":return"flex-end"}},shouldBreakTextLine(){return(this.methods.getBottomLineText().length>5||"MOBILE"===this.config.deviceType)&&"product"!==this.config.sectionId},getScrollPanelStyle(){return this.shouldBreakTextLine()?{display:"flex","flex-direction":"column","align-items":this.getBreakBottomlineAlignment(),gap:"4px"}:{display:"flex","align-items":this.getBreakBottomlineAlignment()}},isRTL(){return this.config.rtl},getSummaryStyle(){return t=this.shouldBreakTextLine(),e=this.getBreakBottomlineAlignment(),n=this.showAverageScore(),i=this.isRTL(),t?{display:"flex","flex-direction":"column","align-items":e,gap:n?"6px":"4px","margin-right":"0px",direction:i?"rtl":"ltr"}:{display:"flex","flex-direction":"row","align-items":e,direction:i?"rtl":"ltr"};var t,e,n,i},getVerticalBorderStyle(){return{display:"flex","align-self":"center","justify-self":"center",height:"11px","border-right":"1px solid black","margin-right":(t=this.isRTL())?"0":"12px","margin-left":t?"12px":"0"};var t},getBottomLineLeftPanelStyle(){return t=this.averageScoreColor(),e=this.primaryFontFamily(),n=this.primaryFontStyle(),i=this.primaryFontWeight(),r=this.isRTL(),{display:"flex","align-self":"center",color:t,"font-family":e,"font-style":n,"font-weight":i,"font-size":"16px","line-height":"18px","margin-left":r?"0":"8px","margin-right":r?"8px":"0","margin-bottom":"1px"};var t,e,n,i,r},getStarsStyle(){return t=this.shouldBreakTextLine(),e=this.isRTL(),t?{display:"flex","flex-direction":"row","align-items":"center","margin-left":"0"}:{display:"flex","flex-direction":"row","margin-left":e?"10px":"0","margin-right":e?"0":"10px","align-items":"center"};var t,e},getBottomLineNewReview(){return t=this.primaryFontFamily(),e=this.primaryFontStyle(),n=this.primaryFontWeight(),i=this.textColor(),{"white-space":"nowrap","font-size":"16px","line-height":"18px","text-align":"start","font-family":t,"font-style":e,"font-weight":n,color:i,"margin-left":"10px","border-left":"1px solid","padding-left":"10px"};var t,e,n,i},getStarContainerStyle(t){const e={display:"flex","flex-direction":"row"};if(5!==t){e[this.isRTL()?"margin-left":"margin-right"]="3.5px"}return this.isRTL()&&(e.transform="scaleX(-1)"),e},scrollToMainWidget(){if(!this.scrollToMainWidgetOnClick())return;const t=document.querySelector("#yotpo-reviews-main-widget");null!=t&&(this.methods.trackClicked({label:"widget",property:"reviews"}),t.scrollIntoView({behavior:"smooth"}))},clickOnPostNewReview(){const t=document.querySelector(".yotpo-new-review-btn");null!=t&&(t.click(),this.methods.trackClicked({label:"widget",property:"write_review_button"}))},triggerShownEvent(){if(!this.store.bottomlineLoaded||0===this.store.totalReviews&&!this.config.enableEmptyState)return;const t=(new Date).getTime()-this.config.startLoadDate.getTime();this.methods.trackAppShown({appLoadDuration:t})},setIntersection(){return{callback:this.triggerShownEvent}},setStyle(){return{display:"flex","justify-content":this.alignment(),"flex-direction":"row","margin-bottom":"3px"}}});if(c.directive("intersection",Tn),r.length&&n.isReadOnly)for(let l=0;l<r.length;l++)c.mount(r[l]);else c.mount(r)}}const Pn=["fonts.googleapis.com/css","cdn-widgetsrepository.yotpo.com/web-fonts/css","staticw2.yotpo.com/web-fonts/css"],Ln=(t,e,n)=>{n&&n.forEach((n=>((t,e,n)=>{const i=t.createElement("style");i.classList.add("yotpo-font");let r="";Pn.some((t=>e.url.includes(t)))?r=`@import url('${e.url}');`:e.url&&(r=`\n    @font-face {\n      font-family: "${e.family}";\n      src: url('${e.url}');\n      font-display: swap;\n    }`),i.innerHTML=r,n?n.appendChild(i):t.head.appendChild(i)})(t,n,e)))};class An{constructor(){__publicField(this,"element"),__publicField(this,"instanceId"),__publicField(this,"productId"),__publicField(this,"merchantData"),__publicField(this,"staticContent"),__publicField(this,"overridenCustomizations"),__publicField(this,"instaceVersionId"),__publicField(this,"startLoadDate"),__publicField(this,"areFontsLoaded"),__publicField(this,"widgetUuid")}init(t){if(this.widgetUuid=o(),g.markWidgetStart(w.category,this.widgetUuid),this.startLoadDate=new Date,!t.element.classList.contains("yotpo-widget-instance"))return;this.element=t.element,this.element.classList.remove("yotpo-widget-instance"),this.instanceId=this.element.getAttribute("data-yotpo-instance-id")||"",this.productId=this.element.getAttribute("data-yotpo-product-id")||this.element.getAttribute("data-yotpo-cart-product-id")||"",this.instaceVersionId=t.metadata.instanceVersionId||"",this.merchantData=t.merchantData,this.staticContent=t.metadata.staticContent,this.areFontsLoaded=t.areFontsLoaded;const e=this.getLowerCaseKeysMap(t.metadata.customizations);this.overridenCustomizations=this.getCustomizations(e)}run(){if(void 0===this.element||null===this.element)return;if(this.overridenCustomizations["mode-read-only"]){const t=document.createElement("div"),e=document.createElement("style");Ce(this.overridenCustomizations["product-page-preview"],!0)&&!Ce(this.overridenCustomizations["other-pages-preview"],!1)?(t.innerHTML=this.overridenCustomizations["view-preview-html-container"]||'<div class="widget-placeholder-container"></div>',e.innerHTML=this.overridenCustomizations["view-preview-style"]):(t.innerHTML=this.overridenCustomizations["view-preview-catalog-page-html-container"]||'<div class="widget-placeholder-container"></div>',e.innerHTML=this.overridenCustomizations["view-preview-catalog-page-style"]),document.getElementsByTagName("head")[0].appendChild(e),this.element.parentNode&&this.element.parentNode.appendChild(t)}const t=new un(this.element,this.widgetUuid,this.overridenCustomizations,this.staticContent,this.merchantData.guid,this.productId,this.instanceId,this.instaceVersionId,{startLoadDate:this.startLoadDate});t.awaitInitComplete().then((()=>{const{config:e}=t.getConfig();if(!this.areFontsLoaded){const t={family:e.primaryFont.font.family,url:e.primaryFont.font.url};Ln(document,this.element.parentElement,[t])}this.element.parentNode&&this.overridenCustomizations["mode-read-only"]&&this.element.parentNode.removeChild(this.element),new En(t)}))}getLowerCaseKeysMap(t){const e={};return Object.keys(t).forEach((n=>{e[n.toLowerCase()]=t[n]})),e}getCustomizations(t){const e=this.getQueryParams(),n=this.getElementAttributes();(t={...t,...n,...e})["mode-read-only"]&&(Ce(t["product-page-preview"],!0)&&!Ce(t["other-pages-preview"],!1)?t["data-yotpo-section-id"]=Te.PRODUCT:t["data-yotpo-section-id"]=Te.CATEGORY);return this.overrideCustomizationsBySection(t)}getElementAttributes(){const t={};for(let e=0,n=this.element.attributes,i=n.length;e<i;e++){t[n[e].nodeName.toLowerCase()]=(n[e].nodeValue||"").toString()}return t}getQueryParams(){const t=["view-preview-html-container","view-preview-style"],e=window.location.search.substring(1),n={};return e.split("&").forEach((e=>{if(!t.includes(e)){const t=e.split("="),i=decodeURIComponent(t[0]).toLowerCase(),r=decodeURIComponent(t.length>1?t[1]:"");n[i]=r}})),n}overrideCustomizationsBySection(t){const e={};return t["data-yotpo-section-id"]||=Te.PRODUCT,Ee.forEach((n=>{this.isCategoryPage(t)?e[n]=t[`${n}-category`]:e[n]=t[`${n}-product`],delete t[`${n}-product`],delete t[`${n}-category`],e[n]||=t[n]})),this.isCategoryPage(t)&&(e["add-review-enable"]=!1,e["scroll-main-widget-enable"]=!1),{...t,...e}}isCategoryPage(t){const e=t["data-yotpo-section-id"];return e.includes(Te.CATEGORY)||e.includes(Te.HOME)||e.includes(Te.CART)}}"undefined"!=typeof yotpoWidgetsContainer&&(g.markWidgetLoaded(w.category),yotpoWidgetsContainer.ReviewsStarRatingsWidget=()=>new An)}();
